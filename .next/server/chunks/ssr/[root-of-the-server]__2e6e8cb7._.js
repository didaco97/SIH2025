module.exports=[556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},544432,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(343317),f=a.i(835882),g=a.i(199987),h=a.i(125534),i=b([e]);[e]=i.then?(await i)():i;let k=[{title:"Main Dashboard",url:"/farmer",icon:f.LayoutDashboard},{title:"Claims",url:"/farmer/claims",icon:g.FileText},{title:"Analytics",url:"/farmer/analytics",icon:h.BarChart3}];function j(){return(0,d.jsx)("aside",{className:"w-56 min-h-screen bg-card border-r border-border shadow-sidebar",children:(0,d.jsxs)("div",{className:"p-5",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,d.jsx)("img",{src:"/logo.png",alt:"Kisan Portal",className:"w-10 h-10 rounded-xl object-contain"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"font-display font-bold text-foreground text-sm",children:"Kisan Portal"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Crop Insurance"})]})]}),(0,d.jsx)("nav",{className:"space-y-1",children:k.map(a=>(0,d.jsxs)(e.NavLink,{to:a.url,end:"/farmer"===a.url,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground hover:bg-secondary hover:text-foreground transition-all duration-200 text-sm",activeClassName:"bg-primary/10 text-primary font-medium",children:[(0,d.jsx)(a.icon,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:a.title})]},a.title))})]})})}a.s(["FarmerSidebar",()=>j]),c()}catch(a){c(a)}},!1),27660,a=>{"use strict";a.i(508171);var b=a.i(127669);let c=(0,b.createContext)(void 0);function d(){let a=(0,b.useContext)(c);if(void 0===a)throw Error("useLanguage must be used within a LanguageProvider");return a}a.s(["useLanguage",()=>d])},115922,a=>{"use strict";let b=(0,a.i(564375).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],115922)},397263,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-tabs");a.n(b),c()}catch(a){c(a)}},!0),148608,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(397263),g=a.i(799856),h=b([f,g]);[f,g]=h.then?(await h)():h;let i=f.Root,j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.List,{ref:c,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));j.displayName=f.List.displayName;let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Trigger,{ref:c,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a),...b}));k.displayName=f.Trigger.displayName;let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));l.displayName=f.Content.displayName,a.s(["Tabs",()=>i,"TabsContent",()=>l,"TabsList",()=>j,"TabsTrigger",()=>k]),c()}catch(a){c(a)}},!1),122267,a=>a.a(async(b,c)=>{try{var d=a.i(127669),e=a.i(39196),f=a.i(371128),g=b([e,f]);function h(a={}){let{limitCount:b=50,realtime:c=!0,farmerId:g}=a,[i,j]=(0,d.useState)([]),[k,l]=(0,d.useState)(!0),[m,n]=(0,d.useState)(null),o=(0,d.useCallback)(async()=>{if(!f.isFirebaseConfigured||!f.db)return void l(!1);try{l(!0);let a=(0,e.collection)(f.db,"claims"),c=(0,e.query)(a,(0,e.orderBy)("createdAt","desc"),(0,e.limit)(2*b)),d=(await (0,e.getDocs)(c)).docs.map(a=>({id:a.id,...a.data()}));g&&(d=d.filter(a=>a.farmerId===g||a.userId===g)),j(d.slice(0,b)),n(null)}catch(a){console.error("Failed to fetch claims",a),n(a)}finally{l(!1)}},[b,g]);return(0,d.useEffect)(()=>{if(!f.isFirebaseConfigured||!f.db)return void l(!1);if(c){let a=(0,e.collection)(f.db,"claims"),c=(0,e.query)(a,(0,e.orderBy)("createdAt","desc"),(0,e.limit)(2*b)),d=(0,e.onSnapshot)(c,a=>{let c=a.docs.map(a=>({id:a.id,...a.data()}));g&&(c=c.filter(a=>a.farmerId===g||a.userId===g)),j(c.slice(0,b)),l(!1),n(null)},a=>{console.error("Claims listener error",a),n(a),l(!1)});return()=>d()}o()},[b,c,g,o]),{claims:i,loading:k,error:m,refetch:o}}[e,f]=g.then?(await g)():g,a.s(["useClaims",()=>h]),c()}catch(a){c(a)}},!1),811705,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(799856),g=b([f]);[f]=g.then?(await g)():g;let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));h.displayName="Card";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));i.displayName="CardHeader";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));j.displayName="CardTitle",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b})).displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter",a.s(["Card",()=>h,"CardContent",()=>k,"CardHeader",()=>i,"CardTitle",()=>j]),c()}catch(a){c(a)}},!1),110199,a=>{"use strict";let b=(0,a.i(564375).default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);a.s(["Sun",()=>b],110199)},398555,a=>{"use strict";let b=(0,a.i(564375).default)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);a.s(["Ruler",()=>b],398555)},380489,a=>{"use strict";let b=(0,a.i(564375).default)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["ShieldCheck",()=>b],380489)},805651,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-switch");a.n(b),c()}catch(a){c(a)}},!0),366736,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(805651),g=a.i(799856),h=b([f,g]);[f,g]=h.then?(await h)():h;let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Root,{className:(0,g.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",a),...b,ref:c,children:(0,d.jsx)(f.Thumb,{className:(0,g.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=f.Root.displayName,a.s(["Switch",()=>i]),c()}catch(a){c(a)}},!1),98456,a=>{"use strict";let b=(0,a.i(564375).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);a.s(["Globe",()=>b],98456)},137007,a=>{"use strict";let b=(0,a.i(564375).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);a.s(["MessageCircle",()=>b],137007)},156232,a=>{"use strict";let b=(0,a.i(564375).default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);a.s(["Moon",()=>b],156232)},833300,(a,b,c)=>{b.exports=a.x("next-themes",()=>require("next-themes"))},537442,a=>{"use strict";let b=(0,a.i(564375).default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);a.s(["Bot",()=>b],537442)},782634,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(137007),g=a.i(734637),h=a.i(115922),i=a.i(537442),j=a.i(138609),k=a.i(311988),l=a.i(396465),m=a.i(811705),n=a.i(112779),o=a.i(567326),p=a.i(799856),q=b([l,m,n,o,p]);function r({role:a}){let[b,c]=(0,e.useState)(!1),[q,r]=(0,e.useState)([{role:"assistant",content:"farmer"===a?"Namaste! ðŸŒ¾ I'm your PMFBY Assistant. I can help you with crop insurance questions and guide you through our portal. How can I help you today?":"Welcome! ðŸ‘‹ I'm your PMFBY Assistant. I can help you with crop insurance queries, claim analysis, and portal navigation. How may I assist you?"}]),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(!1),w=(0,e.useRef)(null),x=(0,e.useRef)(null);(0,e.useEffect)(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[q]),(0,e.useEffect)(()=>{b&&x.current&&x.current.focus()},[b]);let y=async()=>{if(!s.trim()||u)return;let b=s.trim();t(""),r(a=>[...a,{role:"user",content:b}]),v(!0);try{let c=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...q,{role:"user",content:b}],role:a})});if(!c.ok)throw Error("Failed to get response");let d=await c.json();r(a=>[...a,{role:"assistant",content:d.message}])}catch(a){console.error("Chat error:",a),r(a=>[...a,{role:"assistant",content:"I apologize, but I'm having trouble connecting right now. Please try again in a moment."}])}finally{v(!1)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Button,{onClick:()=>c(!b),className:(0,p.cn)("fixed bottom-6 right-6 z-50 h-14 w-14 rounded-full shadow-lg transition-all duration-300","bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700","hover:scale-110 hover:shadow-xl",b&&"scale-0 opacity-0"),children:(0,d.jsx)(f.MessageCircle,{className:"h-6 w-6 text-white"})}),(0,d.jsxs)(m.Card,{className:(0,p.cn)("fixed bottom-6 right-6 z-50 w-[380px] shadow-2xl transition-all duration-300 border-2 border-green-200 dark:border-green-800","transform origin-bottom-right",b?"scale-100 opacity-100":"scale-0 opacity-0 pointer-events-none"),children:[(0,d.jsx)(m.CardHeader,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-t-lg py-3 px-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"bg-white/20 rounded-full p-1.5",children:(0,d.jsx)(i.Bot,{className:"h-5 w-5"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(m.CardTitle,{className:"text-base font-semibold",children:"PMFBY Assistant"}),(0,d.jsx)("p",{className:"text-xs text-green-100",children:"Crop Insurance Help"})]})]}),(0,d.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>c(!1),className:"text-white hover:bg-white/20 h-8 w-8",children:(0,d.jsx)(g.X,{className:"h-4 w-4"})})]})}),(0,d.jsxs)(m.CardContent,{className:"p-0",children:[(0,d.jsx)(o.ScrollArea,{className:"h-[350px] p-4",ref:w,children:(0,d.jsxs)("div",{className:"space-y-4",children:[q.map((a,b)=>(0,d.jsxs)("div",{className:(0,p.cn)("flex gap-2","user"===a.role?"justify-end":"justify-start"),children:["assistant"===a.role&&(0,d.jsx)("div",{className:"flex-shrink-0 h-7 w-7 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:(0,d.jsx)(i.Bot,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,d.jsx)("div",{className:(0,p.cn)("max-w-[80%] rounded-2xl px-4 py-2.5 text-sm","user"===a.role?"bg-green-600 text-white rounded-br-sm":"bg-muted text-foreground rounded-bl-sm"),children:(0,d.jsx)("p",{className:"whitespace-pre-wrap leading-relaxed",children:a.content})}),"user"===a.role&&(0,d.jsx)("div",{className:"flex-shrink-0 h-7 w-7 rounded-full bg-green-600 flex items-center justify-center",children:(0,d.jsx)(j.User,{className:"h-4 w-4 text-white"})})]},b)),u&&(0,d.jsxs)("div",{className:"flex gap-2 justify-start",children:[(0,d.jsx)("div",{className:"flex-shrink-0 h-7 w-7 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:(0,d.jsx)(i.Bot,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,d.jsx)("div",{className:"bg-muted rounded-2xl rounded-bl-sm px-4 py-3",children:(0,d.jsx)(k.Loader2,{className:"h-4 w-4 animate-spin text-green-600"})})]})]})}),(0,d.jsxs)("div",{className:"border-t p-3 bg-card",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(n.Input,{ref:x,value:s,onChange:a=>t(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),y())},placeholder:"Ask about PMFBY or navigation...",disabled:u,className:"flex-1 border-green-200 dark:border-green-800 focus-visible:ring-green-500"}),(0,d.jsx)(l.Button,{onClick:y,disabled:!s.trim()||u,className:"bg-green-600 hover:bg-green-700 text-white px-3",children:(0,d.jsx)(h.Send,{className:"h-4 w-4"})})]}),(0,d.jsx)("p",{className:"text-[10px] text-muted-foreground text-center mt-2",children:"Powered by Gemini AI â€¢ PMFBY & Portal Help Only"})]})]})]})]})}[l,m,n,o,p]=q.then?(await q)():q,a.s(["PMFBYChatbot",()=>r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__2e6e8cb7._.js.map