module.exports=[977929,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(420237);async function d(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>a.toString(16).padStart(2,"0")).join("")}function e(){if(!c.db)throw Error("Firebase is not configured. Please set up your .env.local file with Firebase credentials. Copy .env.example to .env.local and add your Firebase config.");return c.db}async function f(){let a=new Date().getFullYear(),c=(0,b.query)((0,b.collection)(e(),"claims"),(0,b.orderBy)("createdAt","desc")),d=(await (0,b.getDocs)(c)).size+1;return`CLM-${a}-${String(d).padStart(4,"0")}`}async function g(a){let c=await f();return(await (0,b.addDoc)((0,b.collection)(e(),"claims"),{...a,claimNumber:c,status:a.status||"pending",createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()})).id}async function h(a){let c=await (0,b.getDoc)((0,b.doc)(e(),"claims",a));return c.exists()?{id:a,...c.data()}:null}async function i(){let a=(0,b.query)((0,b.collection)(e(),"claims"),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(a)).docs.map(a=>({id:a.id,...a.data()}))}async function j(a,c,d,f){await (0,b.updateDoc)((0,b.doc)(e(),"claims",a),{status:c,officerNotes:d,processedBy:f,processedAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()})}async function k(a,c,d){await (0,b.updateDoc)((0,b.doc)(e(),"claims",a),{blockchainTxHash:c,blockchainExplorerUrl:d,updatedAt:(0,b.serverTimestamp)()})}async function l(a){let c={...a,featuresJson:JSON.stringify(a.features),features:void 0,createdAt:(0,b.serverTimestamp)()};return delete c.features,(await (0,b.addDoc)((0,b.collection)(e(),"segmentedFarms"),c)).id}async function m(){let a=(0,b.query)((0,b.collection)(e(),"segmentedFarms"),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(a)).docs.map(a=>{let b=a.data(),c=b.featuresJson?JSON.parse(b.featuresJson):[];return{id:a.id,...b,features:c}})}async function n(a){let c=await (0,b.getDoc)((0,b.doc)(e(),"segmentedFarms",a));if(c.exists()){let b=c.data(),d=b.featuresJson?JSON.parse(b.featuresJson):[];return{id:a,...b,features:d}}return null}async function o(a){await (0,b.deleteDoc)((0,b.doc)(e(),"segmentedFarms",a))}async function p(a){let c,f=await (0,b.addDoc)((0,b.collection)(e(),"reports"),{...a,createdAt:(0,b.serverTimestamp)()});if(a.claimId){let g=`${a.pdfUrl}-${Date.now()}`;c=await d(g),await (0,b.updateDoc)((0,b.doc)(e(),"claims",a.claimId),{reportId:f.id,reportUrl:a.pdfUrl,status:"waiting",reportGeneratedAt:(0,b.serverTimestamp)(),blockchainHash:c,updatedAt:(0,b.serverTimestamp)()})}return{reportId:f.id,blockchainHash:c}}function q(a,c,d){let f=[(0,b.where)("status","==",a)],g=(0,b.query)((0,b.collection)(e(),"claims"),...f);return(0,b.onSnapshot)(g,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));b.sort((a,b)=>{let c=a.createdAt?.toMillis()||0;return(b.createdAt?.toMillis()||0)-c}),d&&d>0&&(b=b.slice(0,d)),c(b)})}a.s(["createClaim",()=>g,"deleteSegmentedFarm",()=>o,"getAllClaims",()=>i,"getClaim",()=>h,"getSegmentedFarmById",()=>n,"getSegmentedFarms",()=>m,"saveReport",()=>p,"saveSegmentedFarm",()=>l,"subscribeToClaimsByStatus",()=>q,"updateClaimBlockchainInfo",()=>k,"updateClaimStatus",()=>j],977929)},786304,a=>{"use strict";var b=a.i(187924),c=a.i(400187),d=a.i(368114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},587532,a=>{"use strict";let b=(0,a.i(170106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],587532)},452495,a=>{"use strict";let b=(0,a.i(170106).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],452495)},897942,a=>{"use strict";var b=a.i(572131),c=a.i(507554),d=a.i(470121),e=a.i(750104),f=a.i(392843),g=a.i(225152),h=a.i(596743),i=a.i(422297),j=a.i(692616),k=a.i(777192),l=a.i(30553),m=a.i(486228),n=a.i(152081),o=a.i(241852),p=a.i(811011),q=a.i(187924),r="Dialog",[s,t]=(0,e.createContextScope)(r),[u,v]=s(r),w=a=>{let{__scopeDialog:c,children:d,open:e,defaultOpen:h,onOpenChange:i,modal:j=!0}=a,k=b.useRef(null),l=b.useRef(null),[m,n]=(0,g.useControllableState)({prop:e,defaultProp:h??!1,onChange:i,caller:r});return(0,q.jsx)(u,{scope:c,triggerRef:k,contentRef:l,contentId:(0,f.useId)(),titleId:(0,f.useId)(),descriptionId:(0,f.useId)(),open:m,onOpenChange:n,onOpenToggle:b.useCallback(()=>n(a=>!a),[n]),modal:j,children:d})};w.displayName=r;var x="DialogTrigger",y=b.forwardRef((a,b)=>{let{__scopeDialog:e,...f}=a,g=v(x,e),h=(0,d.useComposedRefs)(b,g.triggerRef);return(0,q.jsx)(l.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":g.open,"aria-controls":g.contentId,"data-state":S(g.open),...f,ref:h,onClick:(0,c.composeEventHandlers)(a.onClick,g.onOpenToggle)})});y.displayName=x;var z="DialogPortal",[A,B]=s(z,{forceMount:void 0}),C=a=>{let{__scopeDialog:c,forceMount:d,children:e,container:f}=a,g=v(z,c);return(0,q.jsx)(A,{scope:c,forceMount:d,children:b.Children.map(e,a=>(0,q.jsx)(k.Presence,{present:d||g.open,children:(0,q.jsx)(j.Portal,{asChild:!0,container:f,children:a})}))})};C.displayName=z;var D="DialogOverlay",E=b.forwardRef((a,b)=>{let c=B(D,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=v(D,a.__scopeDialog);return f.modal?(0,q.jsx)(k.Presence,{present:d||f.open,children:(0,q.jsx)(G,{...e,ref:b})}):null});E.displayName=D;var F=(0,p.createSlot)("DialogOverlay.RemoveScroll"),G=b.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=v(D,c);return(0,q.jsx)(n.RemoveScroll,{as:F,allowPinchZoom:!0,shards:[e.contentRef],children:(0,q.jsx)(l.Primitive.div,{"data-state":S(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),H="DialogContent",I=b.forwardRef((a,b)=>{let c=B(H,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=v(H,a.__scopeDialog);return(0,q.jsx)(k.Presence,{present:d||f.open,children:f.modal?(0,q.jsx)(J,{...e,ref:b}):(0,q.jsx)(K,{...e,ref:b})})});I.displayName=H;var J=b.forwardRef((a,e)=>{let f=v(H,a.__scopeDialog),g=b.useRef(null),h=(0,d.useComposedRefs)(e,f.contentRef,g);return b.useEffect(()=>{let a=g.current;if(a)return(0,o.hideOthers)(a)},[]),(0,q.jsx)(L,{...a,ref:h,trapFocus:f.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,c.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),f.triggerRef.current?.focus()}),onPointerDownOutside:(0,c.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,c.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),K=b.forwardRef((a,c)=>{let d=v(H,a.__scopeDialog),e=b.useRef(!1),f=b.useRef(!1);return(0,q.jsx)(L,{...a,ref:c,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(e.current||d.triggerRef.current?.focus(),b.preventDefault()),e.current=!1,f.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(e.current=!0,"pointerdown"===b.detail.originalEvent.type&&(f.current=!0));let c=b.target;d.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&f.current&&b.preventDefault()}})}),L=b.forwardRef((a,c)=>{let{__scopeDialog:e,trapFocus:f,onOpenAutoFocus:g,onCloseAutoFocus:j,...k}=a,l=v(H,e),n=b.useRef(null),o=(0,d.useComposedRefs)(c,n);return(0,m.useFocusGuards)(),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.FocusScope,{asChild:!0,loop:!0,trapped:f,onMountAutoFocus:g,onUnmountAutoFocus:j,children:(0,q.jsx)(h.DismissableLayer,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":S(l.open),...k,ref:o,onDismiss:()=>l.onOpenChange(!1)})}),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(W,{titleId:l.titleId}),(0,q.jsx)(X,{contentRef:n,descriptionId:l.descriptionId})]})]})}),M="DialogTitle",N=b.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=v(M,c);return(0,q.jsx)(l.Primitive.h2,{id:e.titleId,...d,ref:b})});N.displayName=M;var O="DialogDescription",P=b.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=v(O,c);return(0,q.jsx)(l.Primitive.p,{id:e.descriptionId,...d,ref:b})});P.displayName=O;var Q="DialogClose",R=b.forwardRef((a,b)=>{let{__scopeDialog:d,...e}=a,f=v(Q,d);return(0,q.jsx)(l.Primitive.button,{type:"button",...e,ref:b,onClick:(0,c.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})});function S(a){return a?"open":"closed"}R.displayName=Q;var T="DialogTitleWarning",[U,V]=(0,e.createContext)(T,{contentName:H,titleName:M,docsSlug:"dialog"}),W=({titleId:a})=>{let c=V(T),d=`\`${c.contentName}\` requires a \`${c.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${c.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${c.docsSlug}`;return b.useEffect(()=>{a&&(document.getElementById(a)||console.error(d))},[d,a]),null},X=({contentRef:a,descriptionId:c})=>{let d=V("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d.contentName}}.`;return b.useEffect(()=>{let b=a.current?.getAttribute("aria-describedby");c&&b&&(document.getElementById(c)||console.warn(e))},[e,a,c]),null};a.s(["Close",()=>R,"Content",()=>I,"Description",()=>P,"Overlay",()=>E,"Portal",()=>C,"Root",()=>w,"Title",()=>N,"Trigger",()=>y])}];

//# sourceMappingURL=_80a99e94._.js.map