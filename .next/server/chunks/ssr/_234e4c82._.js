module.exports=[596221,a=>{"use strict";let b=(0,a.i(170106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],596221)},591119,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(368114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},292e3,a=>{"use strict";let b=(0,a.i(170106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],292e3)},482520,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},324560,(a,b,c)=>{"use strict";var d=a.r(482520);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},341212,(a,b,c)=>{b.exports=a.r(324560)()},167453,a=>{"use strict";let b=(0,a.i(170106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],167453)},895849,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(777049),e=a.i(699570),f=a.i(591119),g=a.i(596221),h=a.i(104720),i=a.i(306187),j=a.i(167453),k=a.i(292e3),l=a.i(757369),m=a.i(268062);function n(){let[a,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),A=async a=>{let b=await a.arrayBuffer(),c=await m.getDocument({data:b}).promise,d=c.numPages,e=[];for(let a=1;a<=d;a++){let b=await c.getPage(a),d=b.getViewport({scale:2}),f=document.createElement("canvas"),g=f.getContext("2d");if(!g)throw Error("Could not get canvas context");f.height=d.height,f.width=d.width,await b.render({canvasContext:g,viewport:d,canvas:f}).promise,e.push(f.toDataURL("image/png"))}return e},B=async()=>{if(0!==a.length){p(!0),z(null),v(null);try{let b=[];b="application/pdf"===a[0].type?await A(a[0]):[await new Promise(b=>{let c=new FileReader;c.onloadend=()=>b(c.result),c.readAsDataURL(a[0])})];let c="",d=null;for(let a=0;a<b.length;a++){let e=await fetch("/api/ocr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:b[a]})});if(!e.ok){let a=await e.json();throw Error(a.error||"Failed to extract text")}let f=await e.json();if(b.length>1?c+=`
--- Page ${a+1} ---
${f.text}`:c+=f.text,f.geminiError&&v(f.geminiError),f.structuredData&&(!d||0===a)){let a=f.structuredData;d=a,t(a),r({surveyNumber:a.surveyNumber||"Not Found",ownerName:a.ownerName||"Not Found",village:a.village||"Not Found",taluka:a.taluka||"Not Found",district:a.district||"Not Found",area:a.area||"Not Found",cultivableArea:a.cultivableArea||"Not Found",coordinates:a.coordinates||"Not Found",latitude:"",longitude:""})}}x(c),r(a=>{var b;let d,e,f,g,h,i,j;return a?a:(b=c,d=a=>a?.replace(/[:\-\.]/g,"").trim()||"Not Found",e=b.match(/गाव\s*[:\-]+\s*(?!नमुना)([^\s\n]+)/)||b.match(/Village\s*[:\-]+\s*([^\s\n]+)/i),f=b.match(/तालुका\s*[:\-]+\s*([^\s\n]+)/)||b.match(/Taluka\s*[:\-]+\s*([^\s\n]+)/i),g=b.match(/जिल्हा\s*[:\-]+\s*([^\s\n]+)/)||b.match(/District\s*[:\-]+\s*([^\s\n]+)/i),h=b.match(/भूमापन\s*क्रमांक\s*[:\-\s]*([\d\w\/]+)/)||b.match(/गट\s*क्रमांक\s*[:\-\s]*([\d\w\/]+)/)||b.match(/Survey\s*No\.?\s*[:\-\s]*([\d\w\/]+)/i),i=b.match(/खातेदारांची\s*नावे\s*[:\-]*\s*([^\n]+)/)||b.match(/खातेदार\s*[:\-]*\s*([^\n]+)/)||b.match(/Name\s*[:\-]*\s*([^\n]+)/i),j=b.match(/एकूण\s*[:\-\s]*([\d\.१२३४५६७८९०]+)/)||b.match(/क्षेत्र\s*[:\-\s]*([\d\.१२३४५६७८९०]+)/)||b.match(/Area\s*[:\-\s]*([\d\.]+)/i),{surveyNumber:d(h?.[1]||""),ownerName:d(i?.[1]||""),village:d(e?.[1]||""),taluka:d(f?.[1]||""),district:d(g?.[1]||""),area:j?.[1]?`${(a=>{if(!a)return a;let b={"०":"0","१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9"};return a.replace(/[०-९]/g,a=>b[a]||a)})(j[1])} Hectare`:"Not Found",cultivableArea:"0.00 Hectare",coordinates:"Not Found",latitude:"",longitude:""})})}catch(a){console.error("OCR Error:",a),z(a.message||"Failed to process document. Please try again.")}finally{p(!1)}}};return(0,b.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,b.jsx)(l.OfficerSidebar,{}),(0,b.jsxs)("main",{className:"flex-1 p-6 overflow-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground font-display mb-2",children:"OCR Lab"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"AI-Powered 7/12 Extraction Pipeline"})]}),(0,b.jsxs)("div",{className:"space-y-6 max-w-[1600px] mx-auto",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.FileText,{className:"w-5 h-5 text-primary"}),"1. Upload Document"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[(0,b.jsxs)("div",{className:"flex-1 w-full",children:[(0,b.jsx)("div",{className:"w-full border border-dashed bg-muted/30 border-border rounded-lg overflow-hidden min-h-[150px]",children:(0,b.jsx)(d.FileUpload,{onChange:a=>{let b=a[0];if(b&&!b.type.startsWith("image/")&&"application/pdf"!==b.type){z("Unsupported file type. Please upload an image (JPG, PNG) or PDF."),n([]),r(null),t(null),v(null),x("");return}z(null),n(a),r(null),t(null),v(null),x("")}})}),y&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-2 font-medium",children:y})]}),(0,b.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,b.jsx)(e.Button,{onClick:B,disabled:0===a.length||o,size:"lg",className:"h-[150px] w-full sm:w-[200px] gap-2 flex-col",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin"}),(0,b.jsx)("span",{children:"Analyzing..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Scan,{className:"w-8 h-8"}),(0,b.jsx)("span",{children:"Start Analysis"})]})})})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,b.jsxs)(f.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(f.CardHeader,{className:"bg-muted/20 border-b border-border",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 w-6 h-6 rounded-full flex items-center justify-center text-xs",children:"A"}),"Context Extraction (Google Vision)"]})}),(0,b.jsx)(f.CardContent,{className:"flex-1 p-0",children:w?(0,b.jsx)("div",{className:"p-4 text-xs font-mono text-muted-foreground whitespace-pre-wrap h-[500px] overflow-auto bg-[#1e1e1e] text-green-400",children:w}):(0,b.jsx)("div",{className:"h-[500px] flex items-center justify-center text-muted-foreground text-sm p-8 text-center bg-muted/10",children:"Raw text extracted from the image will appear here."})})]}),(0,b.jsxs)(f.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(f.CardHeader,{className:"bg-muted/20 border-b border-border",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)("span",{className:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400 w-6 h-6 rounded-full flex items-center justify-center text-xs",children:"B"}),"AI Processing (Gemini 1.5 Flash)"]})}),(0,b.jsx)(f.CardContent,{className:"flex-1 p-0",children:u?(0,b.jsxs)("div",{className:"h-[500px] flex flex-col items-center justify-center text-red-400 text-sm p-8 text-center bg-[#1e1e1e] border-l-4 border-red-500",children:[(0,b.jsx)(k.AlertCircle,{className:"w-8 h-8 mb-2"}),(0,b.jsx)("p",{className:"font-bold mb-2",children:"AI Extraction Failed"}),(0,b.jsx)("p",{className:"font-mono text-xs whitespace-pre-wrap max-w-full overflow-hidden",children:u})]}):s?(0,b.jsx)("div",{className:"p-4 text-xs font-mono text-blue-400 whitespace-pre-wrap h-[500px] overflow-auto bg-[#1e1e1e]",children:JSON.stringify(s,null,2)}):(0,b.jsx)("div",{className:"h-[500px] flex items-center justify-center text-muted-foreground text-sm p-8 text-center bg-muted/10",children:"AI's reasoning and JSON structure will appear here."})})]}),(0,b.jsxs)(f.Card,{className:"h-full flex flex-col border-primary/20 shadow-lg shadow-primary/5",children:[(0,b.jsx)(f.CardHeader,{className:"bg-primary/5 border-b border-primary/10",children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2 text-primary",children:[(0,b.jsx)(j.CheckCircle2,{className:"w-5 h-5"}),"Final Standardized Data"]})}),(0,b.jsx)(f.CardContent,{className:"flex-1 p-6 overflow-auto h-[500px]",children:q?(0,b.jsx)("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Survey No (भूमापन क्र.)"}),(0,b.jsx)("p",{className:"text-lg font-medium text-foreground",children:q.surveyNumber})]}),(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Farm Coordinates"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:q.coordinates})]}),(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Owner Name (खातेदार)"}),(0,b.jsx)("p",{className:"text-lg font-medium text-foreground",children:q.ownerName})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Village"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:q.village})]}),(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Taluka"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:q.taluka})]})]}),(0,b.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold",children:"Total Area"}),(0,b.jsx)("p",{className:"text-lg font-medium text-foreground",children:q.area})]})]})}):(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center text-muted-foreground",children:[(0,b.jsx)(i.Scan,{className:"w-12 h-12 mb-4 opacity-20"}),(0,b.jsx)("p",{children:"Standardized output will appear here."})]})})]})]})]})]})]})}m.GlobalWorkerOptions.workerSrc="/pdf.worker.min.mjs",a.s(["default",()=>n])}];

//# sourceMappingURL=_234e4c82._.js.map